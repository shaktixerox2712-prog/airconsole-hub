<!DOCTYPE html>
<html>
<head>
  <title>AirConsole Multiplayer</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const playerId = Math.random().toString(36).substring(7);
    const playerRef = ref(db, "players/" + playerId);

    set(playerRef, { x: 100, y: 100 });

    function move(dx, dy) {
      onValue(playerRef, (snapshot) => {
        let data = snapshot.val();
        if (!data) return;
        data.x += dx;
        data.y += dy;
        set(playerRef, data);
      }, { onlyOnce: true });
    }

    window.move = move;

    onValue(ref(db, "players"), (snapshot) => {
      document.getElementById("game").innerHTML = "";
      snapshot.forEach((child) => {
        const player = child.val();
        const div = document.createElement("div");
        div.style.position = "absolute";
        div.style.width = "50px";
        div.style.height = "50px";
        div.style.background = "red";
        div.style.left = player.x + "px";
        div.style.top = player.y + "px";
        document.getElementById("game").appendChild(div);
      });
    });
  </script>

  <style>
    body { margin:0; background:black; overflow:hidden; }
    #game { position:relative; width:100vw; height:80vh; }
    .controls {
      position:fixed;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      display:grid;
      grid-template-columns:60px 60px 60px;
      gap:10px;
    }
    button {
      width:60px;
      height:60px;
      font-size:20px;
      border:none;
      border-radius:10px;
      background:orange;
    }
  </style>
</head>

<body>

<div id="game"></div>

<div class="controls">
  <div></div>
  <button onclick="move(0,-10)">⬆</button>
  <div></div>
  <button onclick="move(-10,0)">⬅</button>
  <button onclick="move(0,10)">⬇</button>
  <button onclick="move(10,0)">➡</button>
</div>

</body>
</html>
