<!DOCTYPE html>
<html>
<head>
<title>DesiConsole Room</title>
<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#111;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  flex-direction:column;
}

h1{
  color:#00f7ff;
}

button{
  padding:15px 30px;
  margin-top:20px;
  font-size:18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:#00f7ff;
  color:black;
}
</style>
</head>

<body>

<h1>Room Connected ðŸŽ®</h1>

<p id="roomDisplay"></p>


<button onclick="goBack()">Back to Home</button>

<script>
const room=localStorage.getItem("room");
document.getElementById("roomDisplay").innerText="Room Code: "+room;

let players = 1;
document.getElementById("playerCount").innerText = "Players: " + players;

function goBack(){
  window.location.href="index.html";
}
</script>
<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
var firebaseConfig = {
  apiKey: "AIzaSyAOCz7nPegv2Rmf1FlpgZJQVUflwC-FFP8",
  authDomain: "airconsole-game-1c64b.firebaseapp.com",
  databaseURL: "https://airconsole-game-1c64b-default-rtdb.firebaseio.com",
  projectId: "airconsole-game-1c64b",
  storageBucket: "airconsole-game-1c64b.firebasestorage.app",
  messagingSenderId: "21762881860",
  appId: "1:21762881860:web:56a881305c3374bdfdbf11"
};

firebase.initializeApp(firebaseConfig);
var database = firebase.database();

const room = localStorage.getItem("room");
document.getElementById("roomDisplay").innerText = "Room Code: " + room;

// Add player to room
var playerRef = database.ref("rooms/" + room + "/players").push();
playerRef.set(true);

// Listen for player count
database.ref("rooms/" + room + "/players").on("value", function(snapshot){
  var count = snapshot.numChildren();
  document.getElementById("playerCount").innerText = "Players: " + count;
});
</script>
</body>
</html>
