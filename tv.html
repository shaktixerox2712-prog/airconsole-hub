<!DOCTYPE html>
<html>
<head>
<title>DesiConsole TV</title>
<style>
body{
  margin:0;
  background:black;
  color:white;
  text-align:center;
  font-family:Arial;
}

#gameArea{
  position:relative;
  width:100%;
  height:80vh;
  background:#111;
  overflow:hidden;
}

#ball{
  position:absolute;
  width:50px;
  height:50px;
  border-radius:50%;
  background:#00f7ff;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
}
</style>
</head>
<body>

<h1>DesiConsole TV ðŸŽ®</h1>
<p id="roomCode"></p>
<p id="playerCount">Players: 0</p>

<div id="gameArea">
  <div id="ball"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
var firebaseConfig = {
  apiKey: "AIzaSyAOCz7nPegv2Rmf1FlpgZJQVUflwC-FFP8",
  authDomain: "airconsole-game-1c64b.firebaseapp.com",
  databaseURL: "https://airconsole-game-1c64b-default-rtdb.firebaseio.com",
  projectId: "airconsole-game-1c64b",
};

firebase.initializeApp(firebaseConfig);
var database = firebase.database();

var room = localStorage.getItem("room");
if(!room){ window.location.href="index.html"; }

document.getElementById("roomCode").innerText="Room Code: "+room;

var ball = document.getElementById("ball");
var posX = window.innerWidth/2;

// Listen movement
database.ref("rooms/"+room+"/move").on("value", function(snapshot){
  var dir = snapshot.val();
  if(dir==="left"){ posX -= 20; }
  if(dir==="right"){ posX += 20; }
  ball.style.left = posX+"px";
});

// Player count
database.ref("rooms/"+room+"/players")
.on("value", function(snapshot){
  document.getElementById("playerCount")
  .innerText="Players: "+snapshot.numChildren();
});
</script>

</body>
</html>
